{% extends 'IndexBundle:Default:headerfooter.html.twig' %}

{% block title %}
    <title>Tableau de bord</title>
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="{{ asset('bundles/css/users.css') }}">

    <!-- css pour le calendrier -->
    <link rel='stylesheet prefetch' href='http://crsten.github.io/datepickk/dist/datepickk.min.css'>
{% endblock %}

{% block content %}
    <header>
        <button class="buttonBurger">
            <span class="buttonBurger__top"></span>
            <span class="buttonBurger__middle"></span>
            <span class="buttonBurger__bottom"></span>
        </button>
        <div class="menu">
            <div>
                <img src="{{ asset('bundles/img/img-profil.jpg') }}" alt="image profil">
            </div>
            {% if app.user %}
                <h3>{{ app.user.prenom }} {{ app.user.nom }}</h3>
            {% endif %}
            <nav>
                <ul>
                    <li><a class="activeLink" id="us-tab-bord" href="/tableau">Tableau de bord</a></li>
                    <li><a id="us-textes" href="/textes">Textes</a></li>
                    <li><a id="us-question" href="/question">Une question ?</a></li>
                    <li><a id="us-twitter" href="/twitter">Twitter</a></li>
                    <li><a id="us-mentions-legales" href="/mentions">Mentions légales</a></li>
                </ul>
            </nav>
            <p>See To Learn © 2017</p>
        </div>
        <img src="{{ asset('bundles/img/logo.png') }}" alt="logo_See2Learn" />
        <a href="/logout"><button class="signOut">Déconnexion</button></a>
    </header>

    <section id="tableau">
        <div class="langue row">
            <p class="col-xs-6">Langue à apprendre :</p>
            <p class="col-xs-6"> {{ app.user.langue }}</p>
        </div>

        <div class="row rowFirst">
            <div class="col-xs-6">
                <div id="infos">
                    <h3>Informations personnelles</h3>
                    <div class="block">
                        {% if app.user %}
                            <div class="row">
                                <div class="col-xs-4 img-infos-pers">
                                    <div>
                                        <img src="{{ asset('bundles/img/img-profil.jpg') }}">
                                    </div>
                                </div>
                                <div class="col-xs-8 donneePerso">
                                    <p>Nom : {{ app.user.nom }}</p>
                                    <p>Prénom : {{ app.user.prenom }}</p>
                                    <p>Nom d'utilisateur : {{ app.user.username }}</p>
                                </div>
                            </div>
                            <p>Email : {{ app.user.email  }}</p>
                            <a href="/update"> <button>Modifier</button> </a>
                        {% endif %}
                    </div>
                </div>
                <div id="cal">
                    <h3>Calendrier</h3>

                    <div class="block">
                        <div id="datepicker"></div>
                    </div>
                </div>
            </div>

            <div class="col-xs-6">
                <div id="stats">
                    <h3>Statistiques</h3>

                    <div class="block">
                        <div>
                            <div class="number-grey">
                                <span class="num"> {{ app.user.nombretextelu }}</span>
                            </div>
                            <p>Textes lus</p>
                        </div>
                        <div>
                            <div class="number-blue">
                                <span class="num"> {{ app.user.nombremotlu }}</span>
                            </div>
                            <p>Mots lus</p>
                        </div>
                        <div>
                            <div class="number-yellow"><span class="num"> {{ (app.user.nombremotlu / mots|length * 100)|round }}%</span></div><p>Des mots en anglais</p>
                        </div>
                        <div>
                            {% set moyenne = 0 %}
                            {% set total = users|length %}
                            {% for user in users %}
                                {% set moyenne = moyenne + (user.nombremotlu / mots|length * 100)|round %}
                            {% endfor %}
                            <div class="number-grey"><span class="num"> {{ moyenne / total }}%</span></div><p>Moyenne utilisateurs</p>
                        </div>
                        <div>
                            <div class="number-blue"><span class="num">4H</span></div><p>Temps de lecture</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" id="graph">
            <h3>Graphiques</h3>
        </div>
    </section>

    <!-- script pour le calendrier -->
    <script src='http://crsten.github.io/datepickk/dist/datepickk.min.js'></script>
    <script src="{{ asset('bundles/js/calendar.js') }}"></script>
{% endblock %}
